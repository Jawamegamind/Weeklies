[pytest]
# Consolidated addopts for all common flags
# NOTE: LLM tests are ignored by default in CI to prevent collection timeout
# To run full suite locally including LLM tests, use: pytest proj2/tests
# --ignore=proj2/tests/llm prevents model loading during collection (prevents timeout)
addopts = --maxfail=1 --disable-warnings --cov=proj2 --cov-branch --cov-report=xml:coverage.xml --cov-report=term-missing -ra --strict-markers --ignore=proj2/tests/llm

# Minimum required pytest version
minversion = 7.0

# Ensure we can import modules from proj2
pythonpath = proj2

# Define all custom markers and enforce they are used correctly
markers =
    smoke: quick must-pass checks
    unit: pure logic helpers
    integration: app + db interactions
    e2e: black-box API flows
    llm: heavy LLM model loading/generation tests - excluded from CI by default
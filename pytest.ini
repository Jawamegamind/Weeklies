[pytest]
# Consolidated addopts for all common flags
# NOTE: LLM tests are skipped by default in CI. To run them locally, use: pytest -m "not llm" or pytest -m llm
addopts = --maxfail=1 --disable-warnings --cov=proj2 --cov-branch --cov-report=xml:coverage.xml --cov-report=term-missing -ra --strict-markers -m "not llm"

# Timeout settings
# timeout_func_only=true prevents timeouts during collection phase (only timeout actual tests)
timeout = 120
timeout_method = signal
timeout_func_only = true

# Only the intended test path
testpaths = proj2/tests

# Minimum required pytest version
minversion = 7.0

# Ensure we can import modules from proj2
pythonpath = proj2

# Define all custom markers and enforce they are used correctly
markers =
    smoke: quick must-pass checks
    unit: pure logic helpers
    integration: app + db interactions
    e2e: black-box API flows
    llm: heavy LLM model loading/generation tests - excluded from CI by default